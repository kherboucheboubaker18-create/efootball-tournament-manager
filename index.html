<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>E-League Pro</title>
<style>
body {
  margin: 0;
  font-family: Arial;
  background: #0f172a;
  color: white;
}
.container {
  max-width: 400px;
  margin: 80px auto;
  background: #111827;
  padding: 20px;
  border-radius: 12px;
}
input, button {
  width: 100%;
  padding: 12px;
  margin: 8px 0;
  border-radius: 8px;
  border: none;
}
button {
  background: #16a34a;
  color: white;
  cursor: pointer;
}
.hidden { display: none; }

.nav {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}
.nav button {
  background: #1f2933;
}
.card {
  background: #1f2937;
  padding: 10px;
  margin: 8px 0;
  border-radius: 8px;
}
</style>
</head>
<body>

<!-- تسجيل -->
<div class="container" id="login">
  <h2>تسجيل الدخول</h2>
  <input id="name" placeholder="اسم اللاعب">
  <input id="code" placeholder="كود الدخول">
  <input id="pass" type="password" placeholder="كلمة السر">
  <button onclick="login()">دخول</button>
</div>

<!-- لوحة التحكم -->
<div class="container hidden" id="dashboard">
  <h2 id="welcome"></h2>

  <div class="nav">
    <button onclick="show('players')">اللاعبين</button>
    <button onclick="show('matches')">المباريات</button>
    <button onclick="show('ranking')">الترتيب</button>
  </div>

  <div id="players"></div>
  <div id="matches" class="hidden"></div>
  <div id="ranking" class="hidden"></div>
</div>

<script>
const ADMIN_CODE = "ADMIN123";
const MATCH_CODE = "GAME2025";

let players = JSON.parse(localStorage.getItem("players") || "[]");

function login() {
  const name = name.value.trim();
  const code = code.value.trim();
  const pass = pass.value.trim();

  if (!name || !code || !pass) {
    alert("كمل المعلومات");
    return;
  }

  if (code !== MATCH_CODE && code !== ADMIN_CODE) {
    alert("كود خاطئ");
    return;
  }

  let player = players.find(p => p.name === name);

  if (!player) {
    player = { name, pass, points: 0 };
    players.push(player);
    localStorage.setItem("players", JSON.stringify(players));
  } else if (player.pass !== pass) {
    alert("كلمة السر خاطئة");
    return;
  }

  login.classList.add("hidden");
  dashboard.classList.remove("hidden");
  welcome.innerText = "مرحبا " + name;

  renderPlayers();
  renderMatches();
  renderRanking();
}

function show(tab) {
  playersDiv.classList.add("hidden");
  matches.classList.add("hidden");
  ranking.classList.add("hidden");
  document.getElementById(tab).classList.remove("hidden");
}

function renderPlayers() {
  playersDiv.innerHTML = "<h3>اللاعبين</h3>";
  players.forEach(p => {
    playersDiv.innerHTML += <div class="card">${p.name}</div>;
  });
}

function renderMatches() {
  matches.innerHTML = `
    <h3>المباريات</h3>
    <div class="card">قريباً...</div>
  `;
}

function renderRanking() {
  ranking.innerHTML = "<h3>الترتيب</h3>";
  players
    .sort((a,b)=>b.points-a.points)
    .forEach(p=>{
      ranking.innerHTML += <div class="card">${p.name} - ${p.points} pts</div>;
    });
}

const playersDiv = document.getElementById("players");
</script>

</body>
</html>
